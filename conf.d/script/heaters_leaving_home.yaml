sequence:
  - condition: state
    entity_id: input_boolean.heaters_override
    state: 'off'
  - service: mqtt.publish
    data_template:
      topic: "things/heater_bed/setMode/req"
      payload_template: "{\"setMode\": \"manual\"}"
  - service: mqtt.publish
    data_template:
      topic: "things/heater_couch/setMode/req"
      payload_template: "{\"setMode\": \"manual\"}"
  - service: mqtt.publish
    data_template:
      topic: "things/heater_kitchen/setMode/req"
      payload_template: "{\"setMode\": \"manual\"}"
  - delay:
      seconds: 5
  - service: mqtt.publish
    data_template:
      topic: "things/heater_bed/setTemperature/req"
      payload_template: "{\"setTemperature\": 17.0}"
  - service: mqtt.publish
    data_template:
      topic: "things/heater_couch/setTemperature/req"
      payload_template: "{\"setTemperature\": 17.0}"
  - service: mqtt.publish
    data_template:
      topic: "things/heater_kitchen/setTemperature/req"
      payload_template: "{\"setTemperature\": 17.0}"

  # Fan
  - service: homeassistant.turn_off
    entity_id: input_boolean.fan_mode_auto
  - service: homeassistant.turn_on
    entity_id: input_boolean.fan_override
  - service: mqtt.publish
    data_template:
      topic: 'things/fan/setLevel/req'
      payload_template: '{"setLevel":0}'
